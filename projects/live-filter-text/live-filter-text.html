<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="../../_css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../../_css/style.css">

    <title>Live Filter Text</title>
</head>

<body>
    <a href="../../index.html">Home page</a>


    <section class="container">
        <h1>Example</h1>
        <div class="row">
            <div class="col">
                <p>This filters the list of Array Object 'title' properties.</p>
            </div>
        </div>
        <h4>Example</h4>
        <div class="row">
            <div class="col">
                <input id="search-text" type="text" placeholder="search for text">
                <div id="notes"></div>
            </div>
        </div>
    </section>


    <section class="container">
        <h1>Live Text Filter</h1>
        <h3>HTML</h3>

        <div class="row">
            <div class="col-4">

                <p>HTML code</p>
            </div>

            <div class="col-8">
                <pre class="example"><span class="code-html">&lt;input id="search-text" type="text" placeholder="search for text"&gt;
&lt;div id="notes"&gt;</span></pre></div>
        </div>

        <h3>JS</h3>
        <div class="row">
            <div class="col-4">
                <p>This project displays text blocks.</p>
                <p>As the user types into the input field, the text section is updated to display any remaining blocks that contain the input text.</p>
            </div>
            <div class="col-8">
                <pre class="example"><span class="code-js">const notes = [{
    title: 'my next trip',
    body: 'I would like to go to Spain'
}, {
    title: 'Habbits to work on',
    body: 'Exercise. Eating a bit better.'
}, {
    title: 'Office modification',
    body: 'Get a new seat'
}]

<span class="code-comment">//Create Object to store the latest filter
//this value changes over time</span>
const filters = {
    searchText: ''
}

<span class="code-comment">//Create function to display text
//x and y correspond to the args used when calling the function
//y is what is typed into the search box</span>
const renderNotes = function (x, y) {
    <span class="code-comment">//limit notes to just those that pass the filter
    //filter() creates a new array, but only with elements that pass
    //a specific test in the function
    //z stores all the Objects in the Array</span>
    const filteredNotes = x.filter(function (z) {
        <span class="code-comment">//if the Object title includes the typed
        //text from the search box, return the Object title</span>
        return z.title.toLowerCase().includes(y.searchText.toLowerCase())
    })

    <span class="code-comment">//clear the div when new input is added
    //set #notes to empty, otherwise any input would just be added to the
    //bottom of the list</span>
    document.querySelector('#notes').innerHTML = ''

    <span class="code-comment">//loop over Array
    //The forEach() method calls a function once for each array element
    //i is the filtered Object
    //at first it's blank, as you type it changes</span>
    filteredNotes.forEach(function (i) {
        <span class="code-comment">//create new element</span>
        const noteEl = document.createElement('p')
        <span class="code-comment">//Set new element to the Object title property</span>
        noteEl.textContent = i.title
        <span class="code-comment">//Print to page</span>
        document.querySelector('#notes').appendChild(noteEl)
    })
}

<span class="code-comment">//Run original function passing in 'notes' Array Object along with the 'filters' Object</span>
renderNotes(notes, filters)

document.querySelector('#search-text').addEventListener('input', function (e) {
    <span class="code-comment">//Set the 'filters' Object property of 'searchText' to user input</span>
    filters.searchText = e.target.value
    <span class="code-comment">//run function to show updated/remaining text</span>
    renderNotes(notes, filters)
})
</span></pre>
            </div>
        </div>

    </section>








    <script>
        const notes = [{
            title: 'my next trip',
            body: 'I would like to go to Spain'
        }, {
            title: 'Habbits to work on',
            body: 'Exercise. Eating a bit better.'
        }, {
            title: 'Office modification',
            body: 'Get a new seat'
        }]

        const filters = {
            searchText: ''
        }

        const renderNotes = function(x, y) {
            //console.log(y)
            const filteredNotes = x.filter(function(z) {
                //this always prints the full Objects in the Array
                //console.log(z)
                return z.title.toLowerCase().includes(y.searchText.toLowerCase())
            })

            document.querySelector('#notes').innerHTML = ''

            //This prints the Objects to the page
            filteredNotes.forEach(function(i) {
              console.log(i)
                const noteEl = document.createElement('p')
                noteEl.textContent = i.title
                document.querySelector('#notes').appendChild(noteEl)
            })

        }

        renderNotes(notes, filters)

        document.querySelector('#search-text').addEventListener('input', function(e) {
            filters.searchText = e.target.value
            renderNotes(notes, filters)
        })
    </script>

    <script src="../../_js/jquery.js"></script>
    <script src="../../_js/bootstrap.bundle.js"></script>
</body>

</html>
